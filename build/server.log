--- Début du log : 1746135133 ---
[2025-05-01 23:32:13][DEBUG] TransactionQueue créée.
[2025-05-01 23:32:13][INFO] Main_Serv INFO : Démarrage du programme serveur.
[2025-05-01 23:32:13][ERROR] Main_Serv ERROR : Nombre d'arguments incorrect. Attendu 7, reçu 0.
[2025-05-01 23:32:13][DEBUG] Destructeur TransactionQueue appelé. Arrêt du thread de traitement...
[2025-05-01 23:32:13][WARNING] TransactionQueue::stop Thread de traitement déjà arrêté ou non démarré.
[2025-05-01 23:32:13][DEBUG] Destructeur TransactionQueue terminé.
--- Fin du log : 1746135133 ---
--- Début du log : 1746135346 ---
[2025-05-01 23:35:46][DEBUG] TransactionQueue créée.
[2025-05-01 23:35:46][INFO] Main_Serv INFO : Démarrage du programme serveur (config hardcodée).
[2025-05-01 23:35:46][INFO] Main_Serv INFO : Configuration chargée (hardcodée). Port: 4433, Cert: cert.pem, Key: key.pem, Users: users.txt, Counter: counter.txt, History: history.txt, Wallets Dir: wallets/
[2025-05-01 23:35:46][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL...
[2025-05-01 23:35:46][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL terminée.
[2025-05-01 23:35:46][INFO] Server::Server INFO : Objet Server créé avec port 4433 et chemins de configuration.
[2025-05-01 23:35:46][INFO] Main_Serv INFO : Objet Server créé. Démarrage...
[2025-05-01 23:35:46][INFO] Server::StartServer INFO : Démarrage du serveur sur le port 4433...
[2025-05-01 23:35:46][DEBUG] Server::InitServerCTX DEBUG : Initialisation du contexte SSL serveur...
[2025-05-01 23:35:46][DEBUG] Server::InitServerCTX DEBUG : Contexte SSL serveur créé.
[2025-05-01 23:35:46][ERROR] Server::InitServerCTX ERROR : Échec chargement certificat serveur : cert.pem
[2025-05-01 23:35:46][ERROR] Server::StartServer ERROR : Échec de l'initialisation du contexte SSL serveur. Arrêt.
[2025-05-01 23:35:46][INFO] Main_Serv INFO : Programme serveur terminé normalement.
[2025-05-01 23:35:46][DEBUG] Main_Serv DEBUG : Nettoyage global OpenSSL...
[2025-05-01 23:35:46][DEBUG] Main_Serv DEBUG : Nettoyage global OpenSSL terminé.
[2025-05-01 23:35:46][INFO] Server::~Server INFO : Destructeur appelé. Début de l'arrêt propre...
[2025-05-01 23:35:46][INFO] Server::StopServer INFO : Arrêt ordonné du serveur demandé...
[2025-05-01 23:35:46][DEBUG] Server::StopServer DEBUG : acceptingConnections flag positionné à false.
[2025-05-01 23:35:46][DEBUG] Server::StopServer DEBUG : Socket d'écoute déjà fermé (-1).
[2025-05-01 23:35:46][WARNING] Server::StopServer WARNING : Thread d'acceptation non joignable lors de l'arrêt.
[2025-05-01 23:35:46][DEBUG] Server::StopServer DEBUG : Copie de 0 sessions actives pour arrêt.
[2025-05-01 23:35:46][INFO] Server::StopServer INFO : Signal d'arrêt envoyé à 0 sessions clientes actives. Attente de leur fin...
[2025-05-01 23:35:46][DEBUG] Server::StopServer DEBUG : Appel stop() terminé pour toutes les sessions copiées.
[2025-05-01 23:35:46][INFO] Server::SaveUsersInternal INFO : Sauvegarde de 0 utilisateurs dans users.txt
[2025-05-01 23:35:46][INFO] Server::StopServer INFO : Liste des utilisateurs sauvegardée.
[2025-05-01 23:35:46][INFO] Transaction::saveCounter Compteur sauvegardé: 0 vers counter.txt
[2025-05-01 23:35:46][INFO] Server::StopServer INFO : Compteur de transactions sauvegardé.
[2025-05-01 23:35:46][INFO] Global Demande d'arrêt du thread de génération de prix.
[2025-05-01 23:35:46][WARNING] Global Thread de génération de prix non joignable ou déjà terminé lors de la demande d'arrêt.
[2025-05-01 23:35:46][INFO] Server::StopServer INFO : Thread de génération des prix arrêté.
[2025-05-01 23:35:46][WARNING] TransactionQueue::stop Thread de traitement déjà arrêté ou non démarré.
[2025-05-01 23:35:46][INFO] Server::StopServer INFO : Thread de traitement de la TransactionQueue arrêté.
[2025-05-01 23:35:46][INFO] Server::StopServer INFO : Arrêt ordonné du serveur terminé.
[2025-05-01 23:35:46][INFO] Server::~Server INFO : Destructeur terminé.
[2025-05-01 23:35:46][DEBUG] Destructeur TransactionQueue appelé. Arrêt du thread de traitement...
[2025-05-01 23:35:46][WARNING] TransactionQueue::stop Thread de traitement déjà arrêté ou non démarré.
[2025-05-01 23:35:46][DEBUG] Destructeur TransactionQueue terminé.
--- Fin du log : 1746135346 ---
--- Début du log : 1746136193 ---
[2025-05-01 23:49:53][DEBUG] TransactionQueue créée.
[2025-05-01 23:49:53][INFO] Main_Serv INFO : Démarrage du programme serveur (config hardcodée).
[2025-05-01 23:49:53][INFO] Main_Serv INFO : Configuration chargée (hardcodée). Port: 4433, Cert: ../cert.crt, Key: ../server.key, Users: users.txt, Counter: counter.txt, History: ../src/data/global_transactions.csv, Wallets Dir: wallets/
[2025-05-01 23:49:53][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL...
[2025-05-01 23:49:53][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL terminée.
[2025-05-01 23:49:53][INFO] Server::Server INFO : Objet Server créé avec port 4433 et chemins de configuration.
[2025-05-01 23:49:53][INFO] Main_Serv INFO : Objet Server créé. Démarrage...
[2025-05-01 23:49:53][INFO] Server::StartServer INFO : Démarrage du serveur sur le port 4433...
[2025-05-01 23:49:53][DEBUG] Server::InitServerCTX DEBUG : Initialisation du contexte SSL serveur...
[2025-05-01 23:49:53][DEBUG] Server::InitServerCTX DEBUG : Contexte SSL serveur créé.
[2025-05-01 23:49:53][ERROR] Server::InitServerCTX ERROR : Échec chargement certificat serveur : ../cert.crt
[2025-05-01 23:49:53][ERROR] Server::StartServer ERROR : Échec de l'initialisation du contexte SSL serveur. Arrêt.
[2025-05-01 23:49:53][INFO] Main_Serv INFO : Programme serveur terminé normalement.
[2025-05-01 23:49:53][DEBUG] Main_Serv DEBUG : Nettoyage global OpenSSL...
[2025-05-01 23:49:53][DEBUG] Main_Serv DEBUG : Nettoyage global OpenSSL terminé.
[2025-05-01 23:49:53][INFO] Server::~Server INFO : Destructeur appelé. Début de l'arrêt propre...
[2025-05-01 23:49:53][INFO] Server::StopServer INFO : Arrêt ordonné du serveur demandé...
[2025-05-01 23:49:53][DEBUG] Server::StopServer DEBUG : acceptingConnections flag positionné à false.
[2025-05-01 23:49:53][DEBUG] Server::StopServer DEBUG : Socket d'écoute déjà fermé (-1).
[2025-05-01 23:49:53][WARNING] Server::StopServer WARNING : Thread d'acceptation non joignable lors de l'arrêt.
[2025-05-01 23:49:53][DEBUG] Server::StopServer DEBUG : Copie de 0 sessions actives pour arrêt.
[2025-05-01 23:49:53][INFO] Server::StopServer INFO : Signal d'arrêt envoyé à 0 sessions clientes actives. Attente de leur fin...
[2025-05-01 23:49:53][DEBUG] Server::StopServer DEBUG : Appel stop() terminé pour toutes les sessions copiées.
[2025-05-01 23:49:53][INFO] Server::SaveUsersInternal INFO : Sauvegarde de 0 utilisateurs dans users.txt
[2025-05-01 23:49:53][INFO] Server::StopServer INFO : Liste des utilisateurs sauvegardée.
[2025-05-01 23:49:53][INFO] Transaction::saveCounter Compteur sauvegardé: 0 vers counter.txt
[2025-05-01 23:49:53][INFO] Server::StopServer INFO : Compteur de transactions sauvegardé.
[2025-05-01 23:49:53][INFO] Global Demande d'arrêt du thread de génération de prix.
[2025-05-01 23:49:53][WARNING] Global Thread de génération de prix non joignable ou déjà terminé lors de la demande d'arrêt.
[2025-05-01 23:49:53][INFO] Server::StopServer INFO : Thread de génération des prix arrêté.
[2025-05-01 23:49:53][WARNING] TransactionQueue::stop Thread de traitement déjà arrêté ou non démarré.
[2025-05-01 23:49:53][INFO] Server::StopServer INFO : Thread de traitement de la TransactionQueue arrêté.
[2025-05-01 23:49:53][INFO] Server::StopServer INFO : Arrêt ordonné du serveur terminé.
[2025-05-01 23:49:53][INFO] Server::~Server INFO : Destructeur terminé.
[2025-05-01 23:49:53][DEBUG] Destructeur TransactionQueue appelé. Arrêt du thread de traitement...
[2025-05-01 23:49:53][WARNING] TransactionQueue::stop Thread de traitement déjà arrêté ou non démarré.
[2025-05-01 23:49:53][DEBUG] Destructeur TransactionQueue terminé.
--- Fin du log : 1746136193 ---
--- Début du log : 1746136262 ---
[2025-05-01 23:51:02][DEBUG] TransactionQueue créée.
[2025-05-01 23:51:02][INFO] Main_Serv INFO : Démarrage du programme serveur (config hardcodée).
[2025-05-01 23:51:02][INFO] Main_Serv INFO : Configuration chargée (hardcodée). Port: 4433, Cert: ../server.crt, Key: ../server.key, Users: users.txt, Counter: counter.txt, History: ../src/data/global_transactions.csv, Wallets Dir: wallets/
[2025-05-01 23:51:02][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL...
[2025-05-01 23:51:02][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL terminée.
[2025-05-01 23:51:02][INFO] Server::Server INFO : Objet Server créé avec port 4433 et chemins de configuration.
[2025-05-01 23:51:02][INFO] Main_Serv INFO : Objet Server créé. Démarrage...
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Démarrage du serveur sur le port 4433...
[2025-05-01 23:51:02][DEBUG] Server::InitServerCTX DEBUG : Initialisation du contexte SSL serveur...
[2025-05-01 23:51:02][DEBUG] Server::InitServerCTX DEBUG : Contexte SSL serveur créé.
[2025-05-01 23:51:02][DEBUG] Server::InitServerCTX DEBUG : Certificat serveur chargé : ../server.crt
[2025-05-01 23:51:02][DEBUG] Server::InitServerCTX DEBUG : Clé privée serveur chargée : ../server.key
[2025-05-01 23:51:02][INFO] Server::InitServerCTX INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-01 23:51:02][INFO] Server::LoadUsersInternal INFO : Chargement utilisateurs terminé. 0 entrées chargées depuis users.txt
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Chargement des utilisateurs terminé (ou fichier non trouvé).
[2025-05-01 23:51:02][INFO] Transaction::loadCounter Fichier compteur vide ou contenant 0. Compteur démarrera à 0.
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Chargement du compteur de transactions terminé.
[2025-05-01 23:51:02][INFO] Global Demande de démarrage du thread de génération de prix.
[2025-05-01 23:51:02][INFO] Global Thread de génération de prix initié.
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Thread de génération des prix SRD-BTC démarré (module Global).
[2025-05-01 23:51:02][INFO] TransactionQueue::start Thread de traitement démarré.
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Thread de traitement de la TransactionQueue démarré.
[2025-05-01 23:51:02][DEBUG] Server::StartServer DEBUG : Socket serveur créé avec FD: 4
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Socket serveur lié à l'adresse et au port 4433
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Serveur en écoute sur le port 4433
[2025-05-01 23:51:02][INFO] Server::StartServer INFO : Thread d'acceptation des connexions démarré.
[2025-05-01 23:51:02][DEBUG] Server::StartServer DEBUG : Attente de la fin du thread d'acceptation...
[2025-05-01 23:51:02][INFO] Server::AcceptLoop INFO : Thread démarré. En attente de connexions...
[2025-05-01 23:51:02][INFO] Global Thread de génération de prix démarré.
[2025-05-01 23:51:02][INFO] Global Fichier de log des prix '../src/data/srd_btc_values.csv' ouvert en mode append.
[2025-05-01 23:51:02][INFO] TransactionQueue::process Thread de traitement en cours...
[2025-05-01 23:51:02][INFO] Global Nouveau prix SRD-BTC simulé : 96648.4164046483
[2025-05-01 23:51:18][INFO] Global Nouveau prix SRD-BTC simulé : 96161.5515805778
[2025-05-01 23:51:33][INFO] Global Nouveau prix SRD-BTC simulé : 98017.5407404625
[2025-05-01 23:51:48][INFO] Global Nouveau prix SRD-BTC simulé : 98300.5953645451
[2025-05-01 23:51:54][INFO] Server::AcceptLoop INFO : Nouvelle connexion acceptée. Socket FD: 6, IP: 10.188.240.101
[2025-05-01 23:51:54][DEBUG] Server::AcceptSSLConnection DEBUG : Tentative handshake SSL pour socket FD: 6
[2025-05-01 23:51:54][DEBUG] Server::AcceptSSLConnection DEBUG : Objet SSL créé pour socket FD: 6
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: Handshake before SSL initialization START
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read client hello
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write server hello
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write change cipher spec
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write encrypted extensions
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write certificate
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write server certificate verify
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write finished
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read finished
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: Handshake SSLv3/TLS write session ticket DONE
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-01 23:51:54][ERROR] OpenSSL Callback: SSL_CB_ERROR - SSL negotiation finished successfully
[2025-05-01 23:51:54][INFO] Server::AcceptSSLConnection INFO : Handshake SSL réussi pour socket FD: 6
[2025-05-01 23:51:54][INFO] Server::AcceptLoop INFO : Handshake SSL réussi pour socket FD: 6
[2025-05-01 23:51:54][INFO] Server::AcceptLoop INFO : Thread gestion client détaché pour socket FD: 6
[2025-05-01 23:51:54][INFO] Server::HandleClient INFO : Thread démarré pour socket FD: 6
[2025-05-01 23:51:54][INFO] ServerConnection::ServerConnection INFO : Objet créé avec socket (6) et SSL existants.
[2025-05-01 23:51:54][DEBUG] Server::HandleClient DEBUG : Objet ServerConnection créé et connecté pour socket FD: 6
[2025-05-01 23:51:54][DEBUG] ClientAuthenticator::ClientAuthenticator DEBUG : Objet ClientAuthenticator créé.
[2025-05-01 23:51:54][INFO] ClientAuthenticator::AuthenticateClient INFO : Démarrage authentification pour socket FD: 6
[2025-05-01 23:51:54][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Reçu message d'auth de socket FD 6 : 'ID:mon_client_id_depuis_script,TOKEN:mon_token_depuis_script
'
[2025-05-01 23:51:54][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Parsing réussi. ID: 'mon_client_id_depuis_script', Mot de passe: '[CACHÉ]'. Socket FD: 6
[2025-05-01 23:51:54][INFO] Server::processAuthRequest INFO : Tentative auth/enregistrement pour ID: 'mon_client_id_depuis_script'...
[2025-05-01 23:51:54][DEBUG] Server::processAuthRequest DEBUG : ID non trouvé : 'mon_client_id_depuis_script'. Tentative d'enregistrement...
[2025-05-01 23:51:54][WARNING] SecurityUtils WARNING : HashPasswordSecure est un placeholder. REMPLACER PAR UN VRAI HACHAGE SECURISÉ (bcrypt, Argon2) !
[2025-05-01 23:51:54][DEBUG] Server::processAuthRequest DEBUG : Nouvel utilisateur 'mon_client_id_depuis_script' ajouté à map en mémoire.
[2025-05-01 23:51:54][INFO] Server::SaveUsersInternal INFO : Sauvegarde de 1 utilisateurs dans users.txt
[2025-05-01 23:51:54][INFO] Server::processAuthRequest INFO : Liste utilisateurs sauvegardée sur disque après ajout ID: 'mon_client_id_depuis_script'.
[2025-05-01 23:51:54][DEBUG] Server::CreateWalletFile DEBUG : Tentative création fichier portefeuille: wallets//mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][DEBUG] Server::CreateWalletFile DEBUG : Répertoire portefeuilles vérifié/créé : wallets/
[2025-05-01 23:51:54][DEBUG] Server::CreateWalletFile DEBUG : Fichier portefeuille ouvert/créé : wallets//mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][INFO] Server::CreateWalletFile INFO : Fichier portefeuille vierge créé et initialisé : wallets//mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][INFO] Server::processAuthRequest INFO : Fichier portefeuille créé avec succès pour ID: 'mon_client_id_depuis_script'.
[2025-05-01 23:51:54][INFO] Server::processAuthRequest INFO : Enregistrement nouvel utilisateur 'mon_client_id_depuis_script' réussi.
[2025-05-01 23:51:54][INFO] ClientAuthenticator::AuthenticateClient INFO : Authentification/enregistrement réussi pour ID: 'mon_client_id_depuis_script'. Résultat Server: NEW. Token de session généré. Socket FD: 6
[2025-05-01 23:51:54][DEBUG] Server::HandleClient DEBUG : Client ID authentifié: 'mon_client_id_depuis_script' (NEW). Socket FD: 6
[2025-05-01 23:51:54][INFO] ClientSession
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire : wallets
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 2, strerror(errno) : 'No such file or directory'
[2025-05-01 23:51:54][WARNING] Wallet Avertissement: create_directories retour false pour wallets mais ec vide. Comportement inhabituel, traité comme succès pour l'existence.
[2025-05-01 23:51:54][DEBUG] Wallet Lecture du fichier portefeuille : wallets/mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][INFO] Wallet Portefeuille (mon_client_id_depuis_script) chargé avec succès : USD=10000.0000000000, SRD-BTC=0.0000000000, Transactions=0
[2025-05-01 23:51:54][INFO] Wallet Portefeuille chargé avec succès pour client ID: mon_client_id_depuis_script depuis wallets/mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][DEBUG] Wallet Objet Wallet créé pour client ID: mon_client_id_depuis_script. Chemin du fichier: wallets/mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire : wallets
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 2, strerror(errno) : 'No such file or directory'
[2025-05-01 23:51:54][WARNING] Wallet Avertissement: create_directories retour false pour wallets mais ec vide. Comportement inhabituel, traité comme succès pour l'existence.
[2025-05-01 23:51:54][DEBUG] Wallet Lecture du fichier portefeuille : wallets/mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][INFO] Wallet Portefeuille (mon_client_id_depuis_script) chargé avec succès : USD=10000.0000000000, SRD-BTC=0.0000000000, Transactions=0
[2025-05-01 23:51:54][INFO] ClientSession
[2025-05-01 23:51:54][ERROR] Server::HandleClient ERROR : Impossible créer/initialiser ClientSession ou Wallet pour client ID: mon_client_id_depuis_script. Socket FD: 6. Arrêt du thread.
[2025-05-01 23:51:54][INFO] ServerConnection::closeConnection INFO : Fermeture de la connexion pour socket FD: 6
[2025-05-01 23:51:54][DEBUG] OpenSSL Callback: SSL3 alert write:warning:close notify
[2025-05-01 23:51:54][DEBUG] ServerConnection::closeConnection DEBUG : SSL_shutdown étape 1/2 terminée. Tentative étape 2 (peut bloquer).
[2025-05-01 23:51:54][DEBUG] ServerConnection::closeConnection DEBUG : Objet SSL libéré.
[2025-05-01 23:51:54][DEBUG] ServerConnection::closeConnection DEBUG : Fermeture du socket FD: 6
[2025-05-01 23:51:54][INFO] ServerConnection::closeConnection INFO : Socket FD: 6 fermé.
[2025-05-01 23:51:54][DEBUG] ServerConnection::closeConnection DEBUG : Nettoyage de connexion terminé.
[2025-05-01 23:51:54][INFO] ClientSession
[2025-05-01 23:51:54][INFO] ClientSession
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire : wallets
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-01 23:51:54][WARNING] Wallet Avertissement: create_directories retour false pour wallets mais ec vide. Comportement inhabituel, traité comme succès pour l'existence.
[2025-05-01 23:51:54][DEBUG] Wallet Sauvegarde du portefeuille : wallets/mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][INFO] Wallet Portefeuille (mon_client_id_depuis_script) sauvegardé : USD=10000.0000000000, SRD-BTC=0.0000000000.
[2025-05-01 23:51:54][INFO] ClientSession
[2025-05-01 23:51:54][DEBUG] Wallet Objet Wallet détruit pour client ID: mon_client_id_depuis_script. Sauvegarde finale en cours...
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire : wallets
[2025-05-01 23:51:54][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-01 23:51:54][WARNING] Wallet Avertissement: create_directories retour false pour wallets mais ec vide. Comportement inhabituel, traité comme succès pour l'existence.
[2025-05-01 23:51:54][DEBUG] Wallet Sauvegarde du portefeuille : wallets/mon_client_id_depuis_script.wallet
[2025-05-01 23:51:54][INFO] Wallet Portefeuille (mon_client_id_depuis_script) sauvegardé : USD=10000.0000000000, SRD-BTC=0.0000000000.
[2025-05-01 23:51:54][INFO] Wallet Portefeuille pour client ID: mon_client_id_depuis_script sauvegardé avec succès vers wallets/mon_client_id_depuis_script.wallet avant destruction.
[2025-05-01 23:51:54][DEBUG] Wallet Objet Wallet détruit pour client ID: mon_client_id_depuis_script. Sauvegarde finale terminée.
[2025-05-01 23:51:54][DEBUG] ServerConnection::~ServerConnection DEBUG : Destructeur appelé. Socket FD final: -1
[2025-05-01 23:51:54][DEBUG] ServerConnection::~ServerConnection DEBUG : Destructeur terminé.
--- Début du log : 1746136844 ---
[2025-05-02 00:00:44][DEBUG] TransactionQueue créée.
[2025-05-02 00:00:44][INFO] Main_Serv INFO : Démarrage du programme serveur (config hardcodée).
[2025-05-02 00:00:44][INFO] Main_Serv INFO : Configuration chargée (hardcodée). Port: 4433, Cert: ../server.crt, Key: ../server.key, Users: users.txt, Counter: counter.txt, History: ../src/data/global_transactions.csv, Wallets Dir: wallets/
[2025-05-02 00:00:44][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL...
[2025-05-02 00:00:44][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL terminée.
[2025-05-02 00:00:44][INFO] Server::Server INFO : Objet Server créé avec port 4433 et chemins de configuration.
[2025-05-02 00:00:44][INFO] Main_Serv INFO : Objet Server créé. Démarrage...
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Démarrage du serveur sur le port 4433...
[2025-05-02 00:00:44][DEBUG] Server::InitServerCTX DEBUG : Initialisation du contexte SSL serveur...
[2025-05-02 00:00:44][DEBUG] Server::InitServerCTX DEBUG : Contexte SSL serveur créé.
[2025-05-02 00:00:44][DEBUG] Server::InitServerCTX DEBUG : Certificat serveur chargé : ../server.crt
[2025-05-02 00:00:44][DEBUG] Server::InitServerCTX DEBUG : Clé privée serveur chargée : ../server.key
[2025-05-02 00:00:44][INFO] Server::InitServerCTX INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:00:44][INFO] Server::LoadUsersInternal INFO : Chargement utilisateurs terminé. 1 entrées chargées depuis users.txt
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Chargement des utilisateurs terminé (ou fichier non trouvé).
[2025-05-02 00:00:44][INFO] Transaction::loadCounter Fichier compteur vide ou contenant 0. Compteur démarrera à 0.
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Chargement du compteur de transactions terminé.
[2025-05-02 00:00:44][INFO] Global Demande de démarrage du thread de génération de prix.
[2025-05-02 00:00:44][INFO] Global Thread de génération de prix initié.
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Thread de génération des prix SRD-BTC démarré (module Global).
[2025-05-02 00:00:44][INFO] TransactionQueue::start Thread de traitement démarré.
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Thread de traitement de la TransactionQueue démarré.
[2025-05-02 00:00:44][DEBUG] Server::StartServer DEBUG : Socket serveur créé avec FD: 4
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Socket serveur lié à l'adresse et au port 4433
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Serveur en écoute sur le port 4433
[2025-05-02 00:00:44][INFO] TransactionQueue::process Thread de traitement en cours...
[2025-05-02 00:00:44][INFO] Server::StartServer INFO : Thread d'acceptation des connexions démarré.
[2025-05-02 00:00:44][DEBUG] Server::StartServer DEBUG : Attente de la fin du thread d'acceptation...
[2025-05-02 00:00:44][INFO] Global Thread de génération de prix démarré.
[2025-05-02 00:00:44][INFO] Server::AcceptLoop INFO : Thread démarré. En attente de connexions...
[2025-05-02 00:00:44][INFO] Global Fichier de log des prix '../src/data/srd_btc_values.csv' ouvert en mode append.
[2025-05-02 00:00:44][INFO] Global Nouveau prix SRD-BTC simulé : 96549.5645330726
[2025-05-02 00:00:51][INFO] Server::AcceptLoop INFO : Nouvelle connexion acceptée. Socket FD: 6, IP: 10.188.240.101
[2025-05-02 00:00:51][DEBUG] Server::AcceptSSLConnection DEBUG : Tentative handshake SSL pour socket FD: 6
[2025-05-02 00:00:51][DEBUG] Server::AcceptSSLConnection DEBUG : Objet SSL créé pour socket FD: 6
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: Handshake before SSL initialization START
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read client hello
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write server hello
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write change cipher spec
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write encrypted extensions
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write certificate
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write server certificate verify
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write finished
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read finished
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: Handshake SSLv3/TLS write session ticket DONE
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:00:51][ERROR] OpenSSL Callback: SSL_CB_ERROR - SSL negotiation finished successfully
[2025-05-02 00:00:51][INFO] Server::AcceptSSLConnection INFO : Handshake SSL réussi pour socket FD: 6
[2025-05-02 00:00:51][INFO] Server::AcceptLoop INFO : Handshake SSL réussi pour socket FD: 6
[2025-05-02 00:00:51][INFO] Server::AcceptLoop INFO : Thread gestion client détaché pour socket FD: 6
[2025-05-02 00:00:51][INFO] Server::HandleClient INFO : Thread démarré pour socket FD: 6
[2025-05-02 00:00:51][INFO] ServerConnection::ServerConnection INFO : Objet créé avec socket (6) et SSL existants.
[2025-05-02 00:00:51][DEBUG] Server::HandleClient DEBUG : Objet ServerConnection créé et connecté pour socket FD: 6
[2025-05-02 00:00:51][DEBUG] ClientAuthenticator::ClientAuthenticator DEBUG : Objet ClientAuthenticator créé.
[2025-05-02 00:00:51][INFO] ClientAuthenticator::AuthenticateClient INFO : Démarrage authentification pour socket FD: 6
[2025-05-02 00:00:51][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Reçu message d'auth de socket FD 6 : 'ID:mon_client_id_depuis_script,TOKEN:mon_token_depuis_script
'
[2025-05-02 00:00:51][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Parsing réussi. ID: 'mon_client_id_depuis_script', Mot de passe: '[CACHÉ]'. Socket FD: 6
[2025-05-02 00:00:51][INFO] Server::processAuthRequest INFO : Tentative auth/enregistrement pour ID: 'mon_client_id_depuis_script'...
[2025-05-02 00:00:51][DEBUG] Server::processAuthRequest DEBUG : ID existant trouvé : 'mon_client_id_depuis_script'. Vérification du mot de passe...
[2025-05-02 00:00:51][WARNING] SecurityUtils WARNING : VerifyPasswordSecure est un placeholder. REMPLACER PAR UNE VRAIE VÉRIFICATION DE HASH SÉCURISÉ !
[2025-05-02 00:00:51][INFO] Server::processAuthRequest INFO : Authentification réussie pour ID existant : 'mon_client_id_depuis_script'.
[2025-05-02 00:00:51][INFO] ClientAuthenticator::AuthenticateClient INFO : Authentification/enregistrement réussi pour ID: 'mon_client_id_depuis_script'. Résultat Server: SUCCESS. Token de session généré. Socket FD: 6
[2025-05-02 00:00:51][DEBUG] Server::HandleClient DEBUG : Client ID authentifié: 'mon_client_id_depuis_script' (SUCCESS). Socket FD: 6
[2025-05-02 00:00:51][INFO] ClientSession
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire à vérifier/créer : wallets
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-02 00:00:51][ERROR] Wallet::ensureWalletsDirectoryExists ERROR: Impossible de créer/vérifier répertoire 'wallets'. Raison (errno): Success. Comportement create_directories inhabituel (ec vide).
[2025-05-02 00:00:51][WARNING] Wallet Impossible de charger le portefeuille pour client ID: mon_client_id_depuis_script. Un nouveau portefeuille vierge sera utilisé. Chemin cherché : wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:00:51][DEBUG] Wallet Objet Wallet créé pour client ID: mon_client_id_depuis_script. Chemin du fichier: wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire à vérifier/créer : wallets
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-02 00:00:51][ERROR] Wallet::ensureWalletsDirectoryExists ERROR: Impossible de créer/vérifier répertoire 'wallets'. Raison (errno): Success. Comportement create_directories inhabituel (ec vide).
[2025-05-02 00:00:51][INFO] ClientSession
[2025-05-02 00:00:51][ERROR] Server::HandleClient ERROR : Impossible créer/initialiser ClientSession ou Wallet pour client ID: mon_client_id_depuis_script. Socket FD: 6. Arrêt du thread.
[2025-05-02 00:00:51][INFO] ServerConnection::closeConnection INFO : Fermeture de la connexion pour socket FD: 6
[2025-05-02 00:00:51][DEBUG] OpenSSL Callback: SSL3 alert write:warning:close notify
[2025-05-02 00:00:51][DEBUG] ServerConnection::closeConnection DEBUG : SSL_shutdown étape 1/2 terminée. Tentative étape 2 (peut bloquer).
[2025-05-02 00:00:51][DEBUG] ServerConnection::closeConnection DEBUG : Objet SSL libéré.
[2025-05-02 00:00:51][DEBUG] ServerConnection::closeConnection DEBUG : Fermeture du socket FD: 6
[2025-05-02 00:00:51][INFO] ServerConnection::closeConnection INFO : Socket FD: 6 fermé.
[2025-05-02 00:00:51][DEBUG] ServerConnection::closeConnection DEBUG : Nettoyage de connexion terminé.
[2025-05-02 00:00:51][INFO] ClientSession
[2025-05-02 00:00:51][INFO] ClientSession
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire à vérifier/créer : wallets
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-02 00:00:51][ERROR] Wallet::ensureWalletsDirectoryExists ERROR: Impossible de créer/vérifier répertoire 'wallets'. Raison (errno): Success. Comportement create_directories inhabituel (ec vide).
[2025-05-02 00:00:51][INFO] ClientSession
[2025-05-02 00:00:51][DEBUG] Wallet Objet Wallet détruit pour client ID: mon_client_id_depuis_script. Sauvegarde finale en cours...
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire à vérifier/créer : wallets
[2025-05-02 00:00:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-02 00:00:51][ERROR] Wallet::ensureWalletsDirectoryExists ERROR: Impossible de créer/vérifier répertoire 'wallets'. Raison (errno): Success. Comportement create_directories inhabituel (ec vide).
[2025-05-02 00:00:51][ERROR] Wallet Échec de la sauvegarde finale du portefeuille pour client ID: mon_client_id_depuis_script vers wallets/mon_client_id_depuis_script.wallet.
[2025-05-02 00:00:51][DEBUG] Wallet Objet Wallet détruit pour client ID: mon_client_id_depuis_script. Sauvegarde finale terminée.
[2025-05-02 00:00:51][DEBUG] ServerConnection::~ServerConnection DEBUG : Destructeur appelé. Socket FD final: -1
[2025-05-02 00:00:51][DEBUG] ServerConnection::~ServerConnection DEBUG : Destructeur terminé.
--- Début du log : 1746137806 ---
[2025-05-02 00:16:46][DEBUG] TransactionQueue créée.
[2025-05-02 00:16:46][INFO] Main_Serv INFO : Démarrage du programme serveur (config hardcodée).
[2025-05-02 00:16:46][INFO] Main_Serv INFO : Configuration chargée (hardcodée). Port: 4433, Cert: ../server.crt, Key: ../server.key, Users: users.txt, Counter: counter.txt, History: ../src/data/global_transactions.csv, Wallets Dir: wallets/
[2025-05-02 00:16:46][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL...
[2025-05-02 00:16:46][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL terminée.
[2025-05-02 00:16:46][INFO] Server::Server INFO : Objet Server créé avec port 4433 et chemins de configuration.
[2025-05-02 00:16:46][INFO] Main_Serv INFO : Objet Server créé. Démarrage...
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Démarrage du serveur sur le port 4433...
[2025-05-02 00:16:46][DEBUG] Server::InitServerCTX DEBUG : Initialisation du contexte SSL serveur...
[2025-05-02 00:16:46][DEBUG] Server::InitServerCTX DEBUG : Contexte SSL serveur créé.
[2025-05-02 00:16:46][DEBUG] Server::InitServerCTX DEBUG : Certificat serveur chargé : ../server.crt
[2025-05-02 00:16:46][DEBUG] Server::InitServerCTX DEBUG : Clé privée serveur chargée : ../server.key
[2025-05-02 00:16:46][INFO] Server::InitServerCTX INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:16:46][INFO] Server::LoadUsersInternal INFO : Chargement utilisateurs terminé. 1 entrées chargées depuis users.txt
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Chargement des utilisateurs terminé (ou fichier non trouvé).
[2025-05-02 00:16:46][INFO] Transaction::loadCounter Fichier compteur vide ou contenant 0. Compteur démarrera à 0.
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Chargement du compteur de transactions terminé.
[2025-05-02 00:16:46][INFO] Global Demande de démarrage du thread de génération de prix.
[2025-05-02 00:16:46][INFO] Global Thread de génération de prix initié.
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Thread de génération des prix SRD-BTC démarré (module Global).
[2025-05-02 00:16:46][INFO] Global Thread de génération de prix démarré.
[2025-05-02 00:16:46][INFO] TransactionQueue::start Thread de traitement démarré.
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Thread de traitement de la TransactionQueue démarré.
[2025-05-02 00:16:46][INFO] Global Fichier de log des prix '../src/data/srd_btc_values.csv' ouvert en mode append.
[2025-05-02 00:16:46][INFO] TransactionQueue::process Thread de traitement en cours...
[2025-05-02 00:16:46][DEBUG] Server::StartServer DEBUG : Socket serveur créé avec FD: 5
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Socket serveur lié à l'adresse et au port 4433
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Serveur en écoute sur le port 4433
[2025-05-02 00:16:46][INFO] Server::StartServer INFO : Thread d'acceptation des connexions démarré.
[2025-05-02 00:16:46][DEBUG] Server::StartServer DEBUG : Attente de la fin du thread d'acceptation...
[2025-05-02 00:16:46][INFO] Server::AcceptLoop INFO : Thread démarré. En attente de connexions...
[2025-05-02 00:16:46][INFO] Global Nouveau prix SRD-BTC simulé : 94227.2784703450
[2025-05-02 00:16:51][INFO] Server::AcceptLoop INFO : Nouvelle connexion acceptée. Socket FD: 11, IP: 10.188.240.101
[2025-05-02 00:16:51][DEBUG] Server::AcceptSSLConnection DEBUG : Tentative handshake SSL pour socket FD: 11
[2025-05-02 00:16:51][DEBUG] Server::AcceptSSLConnection DEBUG : Objet SSL créé pour socket FD: 11
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: Handshake before SSL initialization START
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read client hello
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write server hello
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write change cipher spec
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write encrypted extensions
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write certificate
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write server certificate verify
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write finished
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read finished
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: Handshake SSLv3/TLS write session ticket DONE
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:16:51][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:16:51][ERROR] OpenSSL Callback: SSL_CB_ERROR - SSL negotiation finished successfully
[2025-05-02 00:16:51][INFO] Server::AcceptSSLConnection INFO : Handshake SSL réussi pour socket FD: 11
[2025-05-02 00:16:51][INFO] Server::AcceptLoop INFO : Handshake SSL réussi pour socket FD: 11
[2025-05-02 00:16:51][INFO] Server::AcceptLoop INFO : Thread gestion client détaché pour socket FD: 11
[2025-05-02 00:16:51][INFO] Server::HandleClient INFO : Thread démarré pour socket FD: 11
[2025-05-02 00:16:51][DEBUG] Server::HandleClient DEBUG : Création de l'objet ServerConnection pour socket FD: 11
[2025-05-02 00:16:51][INFO] ServerConnection::ServerConnection INFO : Objet créé avec socket (11) et SSL existants.
[2025-05-02 00:16:51][INFO] Server::HandleClient INFO : Objet ServerConnection créé et connecté pour socket FD: 11
[2025-05-02 00:16:51][DEBUG] ClientAuthenticator::ClientAuthenticator DEBUG : Objet ClientAuthenticator créé.
[2025-05-02 00:16:51][DEBUG] Server::HandleClient DEBUG : Lancement du processus AuthenticateClient...
[2025-05-02 00:16:51][INFO] ClientAuthenticator::AuthenticateClient INFO : Démarrage authentification pour socket FD: 11
[2025-05-02 00:16:51][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Reçu message d'auth de socket FD 11 : 'ID:mon_client_id_depuis_script,TOKEN:mon_token_depuis_script
'
[2025-05-02 00:16:51][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Parsing réussi. ID: 'mon_client_id_depuis_script', Mot de passe: '[CACHÉ]'. Socket FD: 11
[2025-05-02 00:16:51][INFO] Server::processAuthRequest INFO : Tentative auth/enregistrement pour ID: 'mon_client_id_depuis_script'...
[2025-05-02 00:16:51][DEBUG] Server::processAuthRequest DEBUG : ID existant trouvé : 'mon_client_id_depuis_script'. Vérification du mot de passe...
[2025-05-02 00:16:51][WARNING] SecurityUtils WARNING : VerifyPasswordSecure est un placeholder. REMPLACER PAR UNE VRAIE VÉRIFICATION DE HASH SÉCURISÉ !
[2025-05-02 00:16:51][INFO] Server::processAuthRequest INFO : Authentification réussie pour ID existant : 'mon_client_id_depuis_script'.
[2025-05-02 00:16:51][INFO] ClientAuthenticator::AuthenticateClient INFO : Authentification/enregistrement réussi pour ID: 'mon_client_id_depuis_script'. Résultat Server: SUCCESS. Token de session généré. Socket FD: 11
[2025-05-02 00:16:51][INFO] Server::HandleClient INFO : Authentification/enregistrement réussi pour client ID: 'mon_client_id_depuis_script' (SUCCESS). Socket FD: 11
[2025-05-02 00:16:51][DEBUG] Server::HandleClient DEBUG : Lancement de la création de ClientSession pour client ID: mon_client_id_depuis_script...
[2025-05-02 00:16:51][INFO] ClientSession INFO : Initialisation pour client mon_client_id_depuis_script
[2025-05-02 00:16:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire à vérifier/créer : wallets
[2025-05-02 00:16:51][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-02 00:16:51][ERROR] Wallet::ensureWalletsDirectoryExists ERROR: Impossible de créer/vérifier répertoire 'wallets'. Raison (errno): Success. Comportement create_directories inhabituel (ec vide).
[2025-05-02 00:16:51][WARNING] Wallet Impossible de charger le portefeuille pour client ID: mon_client_id_depuis_script. Un nouveau portefeuille vierge sera utilisé. Chemin cherché : wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:16:51][DEBUG] Wallet Objet Wallet créé pour client ID: mon_client_id_depuis_script. Chemin du fichier: wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:16:51][INFO] Server::HandleClient INFO : Objet ClientSession créé pour Client ID: 'mon_client_id_depuis_script'. Socket FD: 11
[2025-05-02 00:16:51][DEBUG] Server::HandleClient DEBUG : Ajout de la session à activeSessions...
[2025-05-02 00:16:51][INFO] Server::HandleClient INFO : Session enregistrée pour client ID: mon_client_id_depuis_script. Total sessions actives: 1.
[2025-05-02 00:16:51][DEBUG] Server::HandleClient DEBUG : Enregistrement de la session auprès de la TransactionQueue...
[2025-05-02 00:16:51][INFO] TransactionQueue::registerSession Session enregistrée pour client ID: mon_client_id_depuis_script
[2025-05-02 00:16:51][INFO] Server::HandleClient INFO : ClientSession pour client ID: mon_client_id_depuis_script enregistrée auprès de la TransactionQueue.
[2025-05-02 00:16:51][DEBUG] Server::HandleClient DEBUG : Démarrage du thread ClientSession...
[2025-05-02 00:16:51][INFO] ClientSession
[2025-05-02 00:16:51][INFO] TransactionQueue::registerSession Session enregistrée pour client ID: mon_client_id_depuis_script
[2025-05-02 00:16:51][INFO] ClientSession
[2025-05-02 00:16:51][INFO] Server::HandleClient INFO : Thread ClientSession démarré pour client ID: mon_client_id_depuis_script. Le thread HandleClient va se terminer normalement.
[2025-05-02 00:16:51][INFO] ClientSession
[2025-05-02 00:17:01][INFO] Global Nouveau prix SRD-BTC simulé : 97433.6425022957
--- Début du log : 1746138003 ---
[2025-05-02 00:20:03][DEBUG] TransactionQueue créée.
[2025-05-02 00:20:03][INFO] Main_Serv INFO : Démarrage du programme serveur (config hardcodée).
[2025-05-02 00:20:03][INFO] Main_Serv INFO : Configuration chargée (hardcodée). Port: 4433, Cert: ../server.crt, Key: ../server.key, Users: users.txt, Counter: counter.txt, History: ../src/data/global_transactions.csv, Wallets Dir: wallets/
[2025-05-02 00:20:03][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL...
[2025-05-02 00:20:03][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL terminée.
[2025-05-02 00:20:03][INFO] Server::Server INFO : Objet Server créé avec port 4433 et chemins de configuration.
[2025-05-02 00:20:03][INFO] Main_Serv INFO : Objet Server créé. Démarrage...
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Démarrage du serveur sur le port 4433...
[2025-05-02 00:20:03][DEBUG] Server::InitServerCTX DEBUG : Initialisation du contexte SSL serveur...
[2025-05-02 00:20:03][DEBUG] Server::InitServerCTX DEBUG : Contexte SSL serveur créé.
[2025-05-02 00:20:03][DEBUG] Server::InitServerCTX DEBUG : Certificat serveur chargé : ../server.crt
[2025-05-02 00:20:03][DEBUG] Server::InitServerCTX DEBUG : Clé privée serveur chargée : ../server.key
[2025-05-02 00:20:03][INFO] Server::InitServerCTX INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:20:03][INFO] Server::LoadUsersInternal INFO : Chargement utilisateurs terminé. 1 entrées chargées depuis users.txt
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Chargement des utilisateurs terminé (ou fichier non trouvé).
[2025-05-02 00:20:03][INFO] Transaction::loadCounter Fichier compteur vide ou contenant 0. Compteur démarrera à 0.
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Chargement du compteur de transactions terminé.
[2025-05-02 00:20:03][INFO] Global Demande de démarrage du thread de génération de prix.
[2025-05-02 00:20:03][INFO] Global Thread de génération de prix initié.
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Thread de génération des prix SRD-BTC démarré (module Global).
[2025-05-02 00:20:03][INFO] TransactionQueue::start Thread de traitement démarré.
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Thread de traitement de la TransactionQueue démarré.
[2025-05-02 00:20:03][DEBUG] Server::StartServer DEBUG : Socket serveur créé avec FD: 4
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Socket serveur lié à l'adresse et au port 4433
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Serveur en écoute sur le port 4433
[2025-05-02 00:20:03][INFO] Server::StartServer INFO : Thread d'acceptation des connexions démarré.
[2025-05-02 00:20:03][DEBUG] Server::StartServer DEBUG : Attente de la fin du thread d'acceptation...
[2025-05-02 00:20:03][INFO] Server::AcceptLoop INFO : Thread démarré. En attente de connexions...
[2025-05-02 00:20:03][INFO] Global Thread de génération de prix démarré.
[2025-05-02 00:20:03][INFO] Global Fichier de log des prix '../src/data/srd_btc_values.csv' ouvert en mode append.
[2025-05-02 00:20:03][INFO] TransactionQueue::process Thread de traitement en cours...
[2025-05-02 00:20:03][INFO] Global Nouveau prix SRD-BTC simulé : 96088.5156968244
[2025-05-02 00:20:07][INFO] Server::AcceptLoop INFO : Nouvelle connexion acceptée. Socket FD: 5, IP: 10.188.240.101
[2025-05-02 00:20:07][DEBUG] Server::AcceptSSLConnection DEBUG : Tentative handshake SSL pour socket FD: 5
[2025-05-02 00:20:07][DEBUG] Server::AcceptSSLConnection DEBUG : Objet SSL créé pour socket FD: 5
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: Handshake before SSL initialization START
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read client hello
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write server hello
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write change cipher spec
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write encrypted extensions
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write certificate
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write server certificate verify
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write finished
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read finished
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: Handshake SSLv3/TLS write session ticket DONE
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:20:07][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:20:07][ERROR] OpenSSL Callback: SSL_CB_ERROR - SSL negotiation finished successfully
[2025-05-02 00:20:07][INFO] Server::AcceptSSLConnection INFO : Handshake SSL réussi pour socket FD: 5
[2025-05-02 00:20:07][INFO] Server::AcceptLoop INFO : Handshake SSL réussi pour socket FD: 5
[2025-05-02 00:20:07][INFO] Server::AcceptLoop INFO : Thread gestion client détaché pour socket FD: 5
[2025-05-02 00:20:07][INFO] Server::HandleClient INFO : Thread démarré pour socket FD: 5
[2025-05-02 00:20:07][DEBUG] Server::HandleClient DEBUG : Création de l'objet ServerConnection pour socket FD: 5
[2025-05-02 00:20:07][INFO] ServerConnection::ServerConnection INFO : Objet créé avec socket (5) et SSL existants.
[2025-05-02 00:20:07][INFO] Server::HandleClient INFO : Objet ServerConnection créé et connecté pour socket FD: 5
[2025-05-02 00:20:07][DEBUG] ClientAuthenticator::ClientAuthenticator DEBUG : Objet ClientAuthenticator créé.
[2025-05-02 00:20:07][DEBUG] Server::HandleClient DEBUG : Lancement du processus AuthenticateClient...
[2025-05-02 00:20:07][INFO] ClientAuthenticator::AuthenticateClient INFO : Démarrage authentification pour socket FD: 5
[2025-05-02 00:20:07][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Reçu message d'auth de socket FD 5 : 'ID:mon_client_id_depuis_script,TOKEN:mon_token_depuis_script
'
[2025-05-02 00:20:07][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Parsing réussi. ID: 'mon_client_id_depuis_script', Mot de passe: '[CACHÉ]'. Socket FD: 5
[2025-05-02 00:20:07][INFO] Server::processAuthRequest INFO : Tentative auth/enregistrement pour ID: 'mon_client_id_depuis_script'...
[2025-05-02 00:20:07][DEBUG] Server::processAuthRequest DEBUG : ID existant trouvé : 'mon_client_id_depuis_script'. Vérification du mot de passe...
[2025-05-02 00:20:07][WARNING] SecurityUtils WARNING : VerifyPasswordSecure est un placeholder. REMPLACER PAR UNE VRAIE VÉRIFICATION DE HASH SÉCURISÉ !
[2025-05-02 00:20:07][INFO] Server::processAuthRequest INFO : Authentification réussie pour ID existant : 'mon_client_id_depuis_script'.
[2025-05-02 00:20:07][INFO] ClientAuthenticator::AuthenticateClient INFO : Authentification/enregistrement réussi pour ID: 'mon_client_id_depuis_script'. Résultat Server: SUCCESS. Token de session généré. Socket FD: 5
[2025-05-02 00:20:07][INFO] Server::HandleClient INFO : Authentification/enregistrement réussi pour client ID: 'mon_client_id_depuis_script' (SUCCESS). Socket FD: 5
[2025-05-02 00:20:07][DEBUG] Server::HandleClient DEBUG : Lancement de la création de ClientSession pour client ID: mon_client_id_depuis_script...
[2025-05-02 00:20:07][INFO] ClientSession INFO : Initialisation pour client mon_client_id_depuis_script
[2025-05-02 00:20:07][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire à vérifier/créer : wallets
[2025-05-02 00:20:07][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-02 00:20:07][ERROR] Wallet::ensureWalletsDirectoryExists ERROR: Impossible de créer/vérifier répertoire 'wallets'. Raison (errno): Success. Comportement create_directories inhabituel (ec vide).
[2025-05-02 00:20:07][WARNING] Wallet Impossible de charger le portefeuille pour client ID: mon_client_id_depuis_script. Un nouveau portefeuille vierge sera utilisé. Chemin cherché : wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:20:07][DEBUG] Wallet Objet Wallet créé pour client ID: mon_client_id_depuis_script. Chemin du fichier: wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:20:07][INFO] Server::HandleClient INFO : Objet ClientSession créé pour Client ID: 'mon_client_id_depuis_script'. Socket FD: 5
[2025-05-02 00:20:07][DEBUG] Server::HandleClient DEBUG : Ajout de la session à activeSessions...
[2025-05-02 00:20:07][INFO] Server::HandleClient INFO : Session enregistrée pour client ID: mon_client_id_depuis_script. Total sessions actives: 1.
[2025-05-02 00:20:07][DEBUG] Server::HandleClient DEBUG : Enregistrement de la session auprès de la TransactionQueue...
[2025-05-02 00:20:07][INFO] TransactionQueue::registerSession Session enregistrée pour client ID: mon_client_id_depuis_script
[2025-05-02 00:20:07][INFO] Server::HandleClient INFO : ClientSession pour client ID: mon_client_id_depuis_script enregistrée auprès de la TransactionQueue.
[2025-05-02 00:20:07][DEBUG] Server::HandleClient DEBUG : Démarrage du thread ClientSession...
[2025-05-02 00:20:07][INFO] ClientSession
[2025-05-02 00:20:07][INFO] TransactionQueue::registerSession Session enregistrée pour client ID: mon_client_id_depuis_script
[2025-05-02 00:20:07][INFO] ClientSession
[2025-05-02 00:20:07][INFO] Server::HandleClient INFO : Thread ClientSession démarré pour client ID: mon_client_id_depuis_script. Le thread HandleClient va se terminer normalement.
[2025-05-02 00:20:07][INFO] ClientSession
[2025-05-02 00:20:18][INFO] Global Nouveau prix SRD-BTC simulé : 97759.5517492053
[2025-05-02 00:20:34][INFO] Global Nouveau prix SRD-BTC simulé : 97675.0039995843
[2025-05-02 00:20:49][INFO] Global Nouveau prix SRD-BTC simulé : 98546.3228684424
[2025-05-02 00:21:04][INFO] Global Nouveau prix SRD-BTC simulé : 97735.9989862405
[2025-05-02 00:21:19][INFO] Global Nouveau prix SRD-BTC simulé : 94539.2120377614
[2025-05-02 00:21:34][INFO] Global Nouveau prix SRD-BTC simulé : 95941.6289372133
[2025-05-02 00:21:49][INFO] Global Nouveau prix SRD-BTC simulé : 95455.6742694028
[2025-05-02 00:22:04][INFO] Global Nouveau prix SRD-BTC simulé : 99167.8742797292
--- Début du log : 1746138222 ---
[2025-05-02 00:23:42][DEBUG] TransactionQueue créée.
[2025-05-02 00:23:42][INFO] Main_Serv INFO : Démarrage du programme serveur (config hardcodée).
[2025-05-02 00:23:42][INFO] Main_Serv INFO : Configuration chargée (hardcodée). Port: 4433, Cert: ../server.crt, Key: ../server.key, Users: users.txt, Counter: counter.txt, History: ../src/data/global_transactions.csv, Wallets Dir: wallets/
[2025-05-02 00:23:42][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL...
[2025-05-02 00:23:42][DEBUG] Main_Serv DEBUG : Initialisation globale OpenSSL terminée.
[2025-05-02 00:23:42][INFO] Server::Server INFO : Objet Server créé avec port 4433 et chemins de configuration.
[2025-05-02 00:23:42][INFO] Main_Serv INFO : Objet Server créé. Démarrage...
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Démarrage du serveur sur le port 4433...
[2025-05-02 00:23:42][DEBUG] Server::InitServerCTX DEBUG : Initialisation du contexte SSL serveur...
[2025-05-02 00:23:42][DEBUG] Server::InitServerCTX DEBUG : Contexte SSL serveur créé.
[2025-05-02 00:23:42][DEBUG] Server::InitServerCTX DEBUG : Certificat serveur chargé : ../server.crt
[2025-05-02 00:23:42][DEBUG] Server::InitServerCTX DEBUG : Clé privée serveur chargée : ../server.key
[2025-05-02 00:23:42][INFO] Server::InitServerCTX INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Contexte SSL serveur initialisé avec succès.
[2025-05-02 00:23:42][INFO] Server::LoadUsersInternal INFO : Chargement utilisateurs terminé. 1 entrées chargées depuis users.txt
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Chargement des utilisateurs terminé (ou fichier non trouvé).
[2025-05-02 00:23:42][INFO] Transaction::loadCounter Fichier compteur vide ou contenant 0. Compteur démarrera à 0.
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Chargement du compteur de transactions terminé.
[2025-05-02 00:23:42][INFO] Global Demande de démarrage du thread de génération de prix.
[2025-05-02 00:23:42][INFO] Global Thread de génération de prix initié.
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Thread de génération des prix SRD-BTC démarré (module Global).
[2025-05-02 00:23:42][INFO] Global Thread de génération de prix démarré.
[2025-05-02 00:23:42][INFO] TransactionQueue::start Thread de traitement démarré.
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Thread de traitement de la TransactionQueue démarré.
[2025-05-02 00:23:42][INFO] Global Fichier de log des prix '../src/data/srd_btc_values.csv' ouvert en mode append.
[2025-05-02 00:23:42][DEBUG] Server::StartServer DEBUG : Socket serveur créé avec FD: 5
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Socket serveur lié à l'adresse et au port 4433
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Serveur en écoute sur le port 4433
[2025-05-02 00:23:42][INFO] Server::StartServer INFO : Thread d'acceptation des connexions démarré.
[2025-05-02 00:23:42][DEBUG] Server::StartServer DEBUG : Attente de la fin du thread d'acceptation...
[2025-05-02 00:23:42][INFO] TransactionQueue::process Thread de traitement en cours...
[2025-05-02 00:23:42][INFO] Server::AcceptLoop INFO : Thread démarré. En attente de connexions...
[2025-05-02 00:23:42][INFO] Global Nouveau prix SRD-BTC simulé : 97585.1662369285
[2025-05-02 00:23:53][INFO] Server::AcceptLoop INFO : Nouvelle connexion acceptée. Socket FD: 10, IP: 10.188.240.101
[2025-05-02 00:23:53][DEBUG] Server::AcceptSSLConnection DEBUG : Tentative handshake SSL pour socket FD: 10
[2025-05-02 00:23:53][DEBUG] Server::AcceptSSLConnection DEBUG : Objet SSL créé pour socket FD: 10
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: Handshake before SSL initialization START
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:before SSL initialization
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read client hello
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write server hello
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write change cipher spec
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write encrypted extensions
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write certificate
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:TLSv1.3 write server certificate verify
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write finished
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:TLSv1.3 early data
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS read finished
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: Handshake SSLv3/TLS write session ticket DONE
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:23:53][DEBUG] OpenSSL Callback: undefined:SSLv3/TLS write session ticket
[2025-05-02 00:23:53][ERROR] OpenSSL Callback: SSL_CB_ERROR - SSL negotiation finished successfully
[2025-05-02 00:23:53][INFO] Server::AcceptSSLConnection INFO : Handshake SSL réussi pour socket FD: 10
[2025-05-02 00:23:53][INFO] Server::AcceptLoop INFO : Handshake SSL réussi pour socket FD: 10
[2025-05-02 00:23:53][INFO] Server::AcceptLoop INFO : Thread gestion client détaché pour socket FD: 10
[2025-05-02 00:23:53][INFO] Server::HandleClient INFO : Thread démarré pour socket FD: 10
[2025-05-02 00:23:53][DEBUG] Server::HandleClient DEBUG : Création de l'objet ServerConnection pour socket FD: 10
[2025-05-02 00:23:53][INFO] ServerConnection::ServerConnection INFO : Objet créé avec socket (10) et SSL existants.
[2025-05-02 00:23:53][INFO] Server::HandleClient INFO : Objet ServerConnection créé et connecté pour socket FD: 10
[2025-05-02 00:23:53][DEBUG] ClientAuthenticator::ClientAuthenticator DEBUG : Objet ClientAuthenticator créé.
[2025-05-02 00:23:53][DEBUG] Server::HandleClient DEBUG : Lancement du processus AuthenticateClient...
[2025-05-02 00:23:53][INFO] ClientAuthenticator::AuthenticateClient INFO : Démarrage authentification pour socket FD: 10
[2025-05-02 00:23:53][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Reçu message d'auth de socket FD 10 : 'ID:mon_client_id_depuis_script,TOKEN:mon_token_depuis_script
'
[2025-05-02 00:23:53][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Parsing réussi. ID: 'mon_client_id_depuis_script', Mot de passe: '[CACHÉ]'. Socket FD: 10
[2025-05-02 00:23:53][DEBUG] ClientAuthenticator::AuthenticateClient DEBUG : Demande au Server de traiter la requête d'auth pour ID: mon_client_id_depuis_script...
[2025-05-02 00:23:53][INFO] Server::processAuthRequest INFO : Tentative auth/enregistrement pour ID: 'mon_client_id_depuis_script'...
[2025-05-02 00:23:53][DEBUG] Server::processAuthRequest DEBUG : ID existant trouvé : 'mon_client_id_depuis_script'. Vérification du mot de passe...
[2025-05-02 00:23:53][WARNING] SecurityUtils WARNING : VerifyPasswordSecure est un placeholder. REMPLACER PAR UNE VRAIE VÉRIFICATION DE HASH SÉCURISÉ !
[2025-05-02 00:23:53][INFO] Server::processAuthRequest INFO : Authentification réussie pour ID existant : 'mon_client_id_depuis_script'.
[2025-05-02 00:23:53][INFO] ClientAuthenticator::AuthenticateClient INFO : Authentification réussie (utilisateur existant) pour ID: 'mon_client_id_depuis_script'. Envoi réponse AUTH SUCCESS au client.
[2025-05-02 00:23:53][INFO] Server::HandleClient INFO : Authentification/enregistrement réussi pour client ID: 'mon_client_id_depuis_script' (SUCCESS). Socket FD: 10
[2025-05-02 00:23:53][DEBUG] Server::HandleClient DEBUG : Lancement de la création de ClientSession pour client ID: mon_client_id_depuis_script...
[2025-05-02 00:23:53][INFO] ClientSession INFO : Initialisation pour client mon_client_id_depuis_script
[2025-05-02 00:23:53][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: Chemin répertoire à vérifier/créer : wallets
[2025-05-02 00:23:53][DEBUG] Wallet::ensureWalletsDirectoryExists DEBUG: create_directories retour : 0, ec.value : 0, ec.message : 'Success', errno : 0, strerror(errno) : 'Success'
[2025-05-02 00:23:53][ERROR] Wallet::ensureWalletsDirectoryExists ERROR: Impossible de créer/vérifier répertoire 'wallets'. Raison (errno): Success. Comportement create_directories inhabituel (ec vide).
[2025-05-02 00:23:53][WARNING] Wallet Impossible de charger le portefeuille pour client ID: mon_client_id_depuis_script. Un nouveau portefeuille vierge sera utilisé. Chemin cherché : wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:23:53][DEBUG] Wallet Objet Wallet créé pour client ID: mon_client_id_depuis_script. Chemin du fichier: wallets/mon_client_id_depuis_script.wallet
[2025-05-02 00:23:53][INFO] Server::HandleClient INFO : Objet ClientSession créé pour Client ID: 'mon_client_id_depuis_script'. Socket FD: 10
[2025-05-02 00:23:53][DEBUG] Server::HandleClient DEBUG : Ajout de la session à activeSessions...
[2025-05-02 00:23:53][INFO] Server::HandleClient INFO : Session enregistrée pour client ID: mon_client_id_depuis_script. Total sessions actives: 1.
[2025-05-02 00:23:53][DEBUG] Server::HandleClient DEBUG : Enregistrement de la session auprès de la TransactionQueue...
[2025-05-02 00:23:53][INFO] TransactionQueue::registerSession Session enregistrée pour client ID: mon_client_id_depuis_script
[2025-05-02 00:23:53][INFO] Server::HandleClient INFO : ClientSession pour client ID: mon_client_id_depuis_script enregistrée auprès de la TransactionQueue.
[2025-05-02 00:23:53][DEBUG] Server::HandleClient DEBUG : Démarrage du thread ClientSession...
[2025-05-02 00:23:53][INFO] ClientSession
[2025-05-02 00:23:53][INFO] TransactionQueue::registerSession Session enregistrée pour client ID: mon_client_id_depuis_script
[2025-05-02 00:23:53][INFO] ClientSession
[2025-05-02 00:23:53][INFO] Server::HandleClient INFO : Thread ClientSession démarré pour client ID: mon_client_id_depuis_script. Le thread HandleClient va se terminer normalement.
[2025-05-02 00:23:53][INFO] ClientSession
[2025-05-02 00:23:56][INFO] ClientSession
[2025-05-02 00:23:56][INFO] ClientSession
[2025-05-02 00:23:57][INFO] Global Nouveau prix SRD-BTC simulé : 96763.4718994716
[2025-05-02 00:24:03][INFO] ClientSession
[2025-05-02 00:24:03][INFO] ClientSession
[2025-05-02 00:24:11][INFO] ClientSession
[2025-05-02 00:24:11][INFO] ClientSession
[2025-05-02 00:24:12][INFO] Global Nouveau prix SRD-BTC simulé : 94543.2089177479
[2025-05-02 00:24:27][INFO] Global Nouveau prix SRD-BTC simulé : 98230.5605202932
[2025-05-02 00:24:30][INFO] ClientSession
[2025-05-02 00:24:30][INFO] ClientSession
[2025-05-02 00:24:41][DEBUG] OpenSSL Callback: SSL3 alert write:fatal:decode error
[2025-05-02 00:24:41][WARNING] ServerConnection::receive WARNING : SSL_read retourné 0. Erreur code: 1. Socket FD: 10
[2025-05-02 00:24:41][DEBUG] ServerConnection::markForClose DEBUG : Connexion marquée pour fermeture. Socket FD: 10
[2025-05-02 00:24:41][INFO] ClientSession
[2025-05-02 00:24:41][INFO] ClientSession
[2025-05-02 00:24:42][INFO] Global Nouveau prix SRD-BTC simulé : 99522.9674553628
